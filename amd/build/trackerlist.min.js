define(["jquery","core/config","core/log"],function(a,b,c){var d={init:function(){a(".tracker-issue-edit-handle").bind("click",this.load_change_form),a("#modal-status-save").bind("click",this.submit_change_form),c.debug("AMD Tracker List initialized")},load_change_form:function(){var c=a(this),d=c.attr("id").replace(/issue-edit-(.*?)-handle-/,""),e=c.attr("data-mode"),f=c.attr("data-context"),g=b.wwwroot+"/mod/tracker/ajax/service.php";g+="?what=getmodalform",g+="&mode="+e,g+="&id="+d,g+="&ctx="+f,a.get(g,function(b){a("#issuelist-edit-inner-form").html(b),a("#modal-status-save").attr("data-issue",d),a("#modal-status-save").attr("data-purpose",e),a(".selectpicker").selectpicker()},"html")},submit_change_form:function(){var c=a(this),e=c.attr("data-issue"),f=c.attr("data-purpose"),g=b.wwwroot+"/mod/tracker/ajax/service.php";g+="?what=update"+f,g+="&id="+e;var h="#"+f+"-select-"+e;g+="&"+f+"="+a(h).val(),a.get(g,function(b){if("success"===b.result){if("status"==f){var c="status-"+d.get_status_code(b.oldvalue);a(".issue-list-status-"+e).removeClass(c);var g="status-"+d.get_status_code(b.newvalue);a(".issue-list-status-"+e).addClass(g)}a("#tracker-"+f+"-"+e).html(b.newlabel),a("#issuelist-edit-form").modal("hide")}},"json")},get_status_code:function(a){var b=["posted","open","resolving","waiting","resolved","abandonned","transfered","testing","validated","published"];return b[a]}};return d});